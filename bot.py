import tweepy
import random
import os

# ุงูููุงุชูุญ
API_KEY = os.environ.get("API_KEY")
API_SECRET = os.environ.get("API_SECRET")
ACCESS_TOKEN = os.environ.get("ACCESS_TOKEN")
ACCESS_TOKEN_SECRET = os.environ.get("ACCESS_TOKEN_SECRET")

client = tweepy.Client(
    consumer_key=API_KEY,
    consumer_secret=API_SECRET,
    access_token=ACCESS_TOKEN,
    access_token_secret=ACCESS_TOKEN_SECRET
)

# ูุงุฆูุฉ ุงูุชุบุฑูุฏุงุช
tweets = [
    "๐ฎ ุชุจุญุซ ุนู ููุณุฑ ุฃุญูุงู ููุซูู ูุฐู ุฎุจุฑุฉุ ุงูุดูุฎ ุฃุจู ููุงู ููุฏู ูู ุชุญูููุงู ุดุฑุนูุงู ูุฏูููุงู ูุฑุคุงู ูุฃุญูุงูู โจ\n๐ฒ wa.me/+966536329403",
    "๐ ููุณุฑ ุฃุญูุงู ุดุฑุนู ููุนุฑูู ุจุฎุจุฑุชู ุงูุทูููุฉ. ุชูุงุตู ูุน ุงูุดูุฎ ุฃุจู ููุงู โ\n๐ฒ wa.me/+966536329403",
    "โจ ูุซูุฑ ูุณุฃููู ุนู ููุณุฑ ุฃุญูุงู ููุซููุ ุงูุดูุฎ ุฃุจู ููุงู ูุณุงุนุฏู ุนูู ููู ุฑุคุงู ุจุฏูุฉ ูุจุทุฑููุฉ ุดุฑุนูุฉ ๐\n๐ฒ wa.me/+966536329403",
    "๐ฎ ูู ุฑุฃูุช ุฑุคูุง ูุชุฑูุฏ ุชูุณูุฑูุงุ ุงูุดูุฎ ุฃุจู ููุงูุ ููุณุฑ ุฃุญูุงู ุจุฎุจุฑุฉ ุณููู ุทูููุฉุ ููุณุฑ ูู ุจุฏูุฉ ููุถูุญ โ\n๐ฒ wa.me/+966536329403",
    "๐ ุชุจุญุซ ุนู ุชูุณูุฑ ุดุฑุนู ูุฑุคุงูุ ููุณุฑ ุงูุฃุญูุงู ุงูุดูุฎ ุฃุจู ููุงู ููุฏู ูู ุฃุฌูุจุฉ ูุงุถุญุฉ ูููุซููุฉ โจ\n๐ฒ wa.me/+966536329403",
    "๐ซ ูุซูุฑ ูู ุงููุงุณ ูุซููู ุจููุณุฑ ุงูุฃุญูุงู ุงูุดูุฎ ุฃุจู ููุงู ูุฃูู ููุณุฑ ุงูุฑุคู ุจุงูุดุฑุน ูุงูุฎุจุฑุฉ ๐\n๐ฒ wa.me/+966536329403",
    "๐ ุนูุฏู ุฑุคูุง ูุญูุฑุฉุ ููุณุฑ ุงูุฃุญูุงู ุงูุดูุฎ ุฃุจู ููุงู ููุณุฑูุง ูู ุจุณูููุฉ ููุถูุญ โจ\n๐ฒ wa.me/+966536329403",
    "๐ฎ ูุง ุชุจุญุซ ูุซูุฑุงูุ ููุณุฑ ุงูุฃุญูุงู ุงูููุซูู ุฃุจู ููุงู ูุดุฑุญ ูู ุฑููุฒ ุฑุคุงู ุจุฏูุฉ ุนุงููุฉ ูุดุฑุนูุฉ โ\n๐ฒ wa.me/+966536329403",
    "๐ ุฅุฐุง ุฃุฑุฏุช ุชูุณูุฑ ุฑุคูุงู ุจุทุฑููุฉ ุดุฑุนูุฉ ุตุญูุญุฉุ ููุณุฑ ุงูุฃุญูุงู ุงูุดูุฎ ุฃุจู ููุงู ูู ุงูุฎูุงุฑ ุงูุฃูุถู โจ\n๐ฒ wa.me/+966536329403",
    "โจ ุขูุงู ุงูุฃุดุฎุงุต ูุณุฃููู ุนู ููุณุฑ ุฃุญูุงู ููุซููุ ุงูุดูุฎ ุฃุจู ููุงู ููุฏู ุงูุชูุณูุฑ ุจุฎุจุฑุฉ ูุตุฏู ๐\n๐ฒ wa.me/+966536329403"
]

# ุณุฌู ุงูุชุบุฑูุฏุงุช ุงูููุดูุฑุฉ
log_file = "log.txt"
if os.path.exists(log_file):
    with open(log_file, "r", encoding="utf-8") as f:
        posted = [line.strip() for line in f.readlines()]
else:
    posted = []

# ุงูุชุบุฑูุฏุงุช ุงููุชุงุญุฉ ูููุดุฑ
available = [t for t in tweets if t not in posted]

if not available:
    posted = []
    available = tweets.copy()

tweet = random.choice(available)

try:
    response = client.create_tweet(text=tweet)
    print("โ ุชู ุงููุดุฑ:", response.data["id"])
    
    # ุชุญุฏูุซ ุงูุณุฌู
    posted.append(tweet)
    with open(log_file, "w", encoding="utf-8") as f:
        for t in posted:
            f.write(t + "\n")
except Exception as e:
    print("โ ุฎุทุฃ ูู ุงููุดุฑ:", e)
