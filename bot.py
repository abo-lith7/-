import tweepy
import random
import os

# ุงูููุงุชูุญ
API_KEY = os.environ.get("API_KEY")
API_SECRET = os.environ.get("API_SECRET")
ACCESS_TOKEN = os.environ.get("ACCESS_TOKEN")
ACCESS_TOKEN_SECRET = os.environ.get("ACCESS_TOKEN_SECRET")

client = tweepy.Client(
    consumer_key=API_KEY,
    consumer_secret=API_SECRET,
    access_token=ACCESS_TOKEN,
    access_token_secret=ACCESS_TOKEN_SECRET
)

# ูุงุฆูุฉ ุงูุชุบุฑูุฏุงุช
tweets = [
    "๐ฎ ุชุจุญุซ ุนู ููุณุฑ ุฃุญูุงู ููุซูู ูุฐู ุฎุจุฑุฉุ ุงูุดูุฎ ุฃุจู ููุงู ููุฏู ูู ุชูุณูุฑูุง ุดุฑุนููุง ุฏููููุง ููู ุฑุคุงู ูุฃุญูุงูู โจ\n๐ฒ ุชูุงุตู ูุจุงุดุฑุฉ: wa.me/+966536329403\n#ุชูุณูุฑ_ุงูุฃุญูุงู #ููุณุฑ_ุฃุญูุงู #ุฑุคู",
    
    "๐ ูู ุญููุช ุจุฑุคูุง ูุญูุฑุฉ ูุชุฑูุฏ ููููุง ุจุทุฑููุฉ ุดุฑุนูุฉุ ููุณุฑ ุงูุฃุญูุงู ุงูุดูุฎ ุฃุจู ููุงู ูุณุงุนุฏู ุนูู ุงูุชุญููู ุงูุตุญูุญ ูุงููุงุถุญ โ\n๐ฒ ุชูุงุตู ุงูุขู: wa.me/+966536329403\n#ุชูุณูุฑ_ุงูุฃุญูุงู #ููุณุฑ_ุฃุญูุงู",
    
    "โจ ูุซูุฑ ูู ุงููุงุณ ูุณุฃููู ุนู ููุณุฑ ุฃุญูุงู ููุซููุ ุงูุดูุฎ ุฃุจู ููุงู ููุฏู ุดุฑุญูุง ูุงุถุญูุง ููู ุงูุฑููุฒ ูุงูุฃุญูุงู ุจุทุฑููุฉ ุดุฑุนูุฉ ๐\n๐ฒ ุฑูู ูุจุงุดุฑ: wa.me/+966536329403\n#ุฑุคู #ููุณุฑ_ุฃุญูุงู",
    
    "๐ฎ ูุฏูู ุญูู ุชุฑูุฏ ุชูุณูุฑู ุจุฏูุฉ ูุตุฏูุ ุงูุดูุฎ ุฃุจู ููุงู ููุณุฑ ุฃุญูุงู ุฐู ุฎุจุฑุฉ ุทูููุฉ ููุฏู ูู ุงูุชุญููู ุงูุดุฑุนู ุงูุตุญูุญ โ\n๐ฒ ุชูุงุตู ุนุจุฑ ูุงุชุณุงุจ: wa.me/+966536329403\n#ุชูุณูุฑ_ุงูุฃุญูุงู #ููุณุฑ_ุฃุญูุงู",
    
    "๐ ุชุจุญุซ ุนู ุชูุณูุฑ ุดุฑุนู ูุฑุคุงูุ ููุณุฑ ุงูุฃุญูุงู ุงูุดูุฎ ุฃุจู ููุงู ููุฏู ูู ุงูุฅุฌุงุจุฉ ุงูููุซููุฉ ููู ุงูุฃุญูุงู โจ\n๐ฒ ููุชูุงุตู: wa.me/+966536329403\n#ุฑุคู #ููุณุฑ_ุฃุญูุงู",
    
    "๐ซ ุขูุงู ุงูุฃุดุฎุงุต ูุซููู ุจููุณุฑ ุงูุฃุญูุงู ุงูุดูุฎ ุฃุจู ููุงู ูุฃูู ููุณุฑ ุงูุฑุคู ุจุงูุดุฑุน ูุงูุฎุจุฑุฉ ๐\n๐ฒ ุชูุงุตู ุงูุขู: wa.me/+966536329403\n#ุชูุณูุฑ_ุงูุฃุญูุงู #ููุณุฑ_ุฃุญูุงู #ุฑุคู",
    
    "๐ ูู ุฑุฃูุช ุฑุคูุง ูุญูุฑุฉุ ููุณุฑ ุงูุฃุญูุงู ุงูุดูุฎ ุฃุจู ููุงู ููุณุฑูุง ุจุณูููุฉ ููุถูุญ ูุน ุชูุถูุญ ุงูุฑููุฒ ุจุฏูุฉ ุดุฑุนูุฉ โจ\n๐ฒ ุฑูู ูุจุงุดุฑ: wa.me/+966536329403\n#ููุณุฑ_ุฃุญูุงู #ุฑุคู",
    
    "๐ฎ ูุง ุชุจุญุซ ูุซูุฑูุงุ ููุณุฑ ุงูุฃุญูุงู ุฃุจู ููุงู ูุดุฑุญ ูู ูู ุฑููุฒ ุฑุคุงู ุจุฏูุฉ ุนุงููุฉ ูุทุฑููุฉ ุดุฑุนูุฉ โ\n๐ฒ ุชูุงุตู ุนุจุฑ ูุงุชุณุงุจ: wa.me/+966536329403\n#ุชูุณูุฑ_ุงูุฃุญูุงู #ููุณุฑ_ุฃุญูุงู",
    
    "๐ ุฅุฐุง ุฃุฑุฏุช ุชูุณูุฑ ุฑุคูุงู ุจุทุฑููุฉ ุดุฑุนูุฉ ุตุญูุญุฉุ ููุณุฑ ุงูุฃุญูุงู ุงูุดูุฎ ุฃุจู ููุงู ูู ุงูุฎูุงุฑ ุงูุฃูุซู โจ\n๐ฒ ููุชูุงุตู: wa.me/+966536329403\n#ุฑุคู #ููุณุฑ_ุฃุญูุงู",
    
    "โจ ุขูุงู ุงูุฃุดุฎุงุต ูุณุฃููู ุนู ููุณุฑ ุฃุญูุงู ููุซููุ ูุฐุง ูู ุงูุดูุฎ ุฃุจู ููุงูุ ููุฏู ูู ุงูุชุญููู ุงูุดุฑุนู ุจุฏูุฉ ูุตุฏู ๐\n๐ฒ ุชูุงุตู ุนุจุฑ ูุงุชุณุงุจ: wa.me/+966536329403\n#ุชูุณูุฑ_ุงูุฃุญูุงู #ููุณุฑ_ุฃุญูุงู"
]
# ุณุฌู ุงูุชุบุฑูุฏุงุช ุงูููุดูุฑุฉ
log_file = "log.txt"
if os.path.exists(log_file):
    with open(log_file, "r", encoding="utf-8") as f:
        posted = [line.strip() for line in f.readlines()]
else:
    posted = []

# ุงูุชุบุฑูุฏุงุช ุงููุชุงุญุฉ ูููุดุฑ
available = [t for t in tweets if t not in posted]

if not available:
    posted = []
    available = tweets.copy()

tweet = random.choice(available)

try:
    response = client.create_tweet(text=tweet)
    print("โ ุชู ุงููุดุฑ:", response.data["id"])
    
    # ุชุญุฏูุซ ุงูุณุฌู
    posted.append(tweet)
    with open(log_file, "w", encoding="utf-8") as f:
        for t in posted:
            f.write(t + "\n")
except Exception as e:
    print("โ ุฎุทุฃ ูู ุงููุดุฑ:", e)
